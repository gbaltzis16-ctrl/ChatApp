<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="base.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oxygen+Mono&display=swap" rel="stylesheet">
    <title>Title</title>
</head>
<body>
    <div class="container">
        <div class="header">George's Chatroom</div>
        <div id="chat"></div>

        <div class="messageinput">
            <input id="msg" placeholder="Type message...">
            <button onclick="sendMsg()">Send</button>
            <button onclick="toggleTheme()">Dark Mode</button>
        </div>
    </div>
    <script>
        const ws = new WebSocket ("wss://chatapp-yc8o.onrender.com")
        const div= document.getElementById("chat");

        ws.onopen= () => div.innerText+= "[connected]\n";

        ws.onmessage= (event) => {
            div.innerText+=  "Server: " +  event.data+"\n";
            div.scrollTop= div.scrollHeight;
        };

        ws.onclose= () => div.innerText+= "[disconnected]\n";

        function sendMsg(){
            const input= document.getElementById("msg");
            ws.send(input.value);
            div.innerText+= "You: " + input.value + "\n";
            input.value= "";
        }

        function toggleTheme(){
            document.body.classList.toggle("dark");
        }
    </script>
</body>
</html>